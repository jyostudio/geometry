{
  "version": 3,
  "sources": ["../src/curve.ts"],
  "sourcesContent": ["import overload from \"@jyostudio/overload\";\r\nimport { lazyCheckSetterType } from \"@jyostudio/overload/dist/decorator\";\r\nimport CurveContinuity from \"./curve-continuity\";\r\nimport CurveKeyCollection from \"./curve-key-collection\";\r\nimport CurveLoopType from \"./curve-loop-type\";\r\nimport CurveTangent from \"./curve-tangent\";\r\n\r\nconst CONSTRUCTOR_SYMBOL = Symbol(\"constructor\");\r\n\r\n/**\r\n * \u5B58\u50A8\u4EFB\u610F 2D CurveKey \u70B9\u96C6\uFF0C\u5E76\u63D0\u4F9B\u76F8\u5E94\u7684\u65B9\u6CD5\u5BF9\u5176\u5B9A\u4E49\u7684\u66F2\u7EBF\u8FDB\u884C\u529F\u80FD\u8BC4\u4F30\u3002\r\n * @class\r\n */\r\nexport default class Curve {\r\n    /**\r\n     * \u6307\u5B9A\u5982\u4F55\u5904\u7406\u5927\u4E8E\u66F2\u7EBF\u4E2D\u6700\u540E\u4E00\u4E2A\u63A7\u5236\u70B9\u7684\u6743\u91CD\u503C\u3002\r\n     */\r\n    #postLoop: CurveLoopType = null!;\r\n\r\n    /**\r\n     * \u83B7\u53D6\u6307\u5B9A\u5982\u4F55\u5904\u7406\u5927\u4E8E\u66F2\u7EBF\u4E2D\u6700\u540E\u4E00\u4E2A\u63A7\u5236\u70B9\u7684\u6743\u91CD\u503C\u3002\r\n     */\r\n    public get postLoop(): CurveLoopType {\r\n        return this.#postLoop;\r\n    }\r\n\r\n    /**\r\n     * \u8BBE\u7F6E\u6307\u5B9A\u5982\u4F55\u5904\u7406\u5927\u4E8E\u66F2\u7EBF\u4E2D\u6700\u540E\u4E00\u4E2A\u63A7\u5236\u70B9\u7684\u6743\u91CD\u503C\u3002\r\n     */\r\n    @lazyCheckSetterType(() => CurveLoopType)\r\n    public set postLoop(value: CurveLoopType) {\r\n        this.#postLoop = value;\r\n    }\r\n\r\n    /**\r\n     * \u6307\u5B9A\u5982\u4F55\u5904\u7406\u5C0F\u4E8E\u66F2\u7EBF\u4E2D\u7B2C\u4E00\u4E2A\u63A7\u5236\u70B9\u7684\u6743\u91CD\u503C\u3002\r\n     */\r\n    #preLoop: CurveLoopType = null!;\r\n\r\n    /**\r\n     * \u83B7\u53D6\u6307\u5B9A\u5982\u4F55\u5904\u7406\u5C0F\u4E8E\u66F2\u7EBF\u4E2D\u7B2C\u4E00\u4E2A\u63A7\u5236\u70B9\u7684\u6743\u91CD\u503C\u3002\r\n     */\r\n    public get preLoop(): CurveLoopType {\r\n        return this.#preLoop;\r\n    }\r\n\r\n    /**\r\n     * \u8BBE\u7F6E\u6307\u5B9A\u5982\u4F55\u5904\u7406\u5C0F\u4E8E\u66F2\u7EBF\u4E2D\u7B2C\u4E00\u4E2A\u63A7\u5236\u70B9\u7684\u6743\u91CD\u503C\u3002\r\n     */\r\n    @lazyCheckSetterType(() => CurveLoopType)\r\n    public set preLoop(value: CurveLoopType) {\r\n        this.#preLoop = value;\r\n    }\r\n\r\n    /**\r\n     * \u6784\u6210\u66F2\u7EBF\u7684\u70B9\u3002\r\n     */\r\n    #keys: CurveKeyCollection = null!;\r\n\r\n    /**\r\n     * \u83B7\u53D6\u6784\u6210\u66F2\u7EBF\u7684\u70B9\u3002\r\n     */\r\n    public get keys(): CurveKeyCollection {\r\n        return this.#keys;\r\n    }\r\n\r\n    /**\r\n     * \u83B7\u53D6\u4E00\u4E2A\u6307\u793A\u66F2\u7EBF\u662F\u5426\u4E3A\u5E38\u91CF\u7684\u503C\u3002\r\n     */\r\n    public get isConstant(): boolean {\r\n        return this.#keys.length <= 1;\r\n    }\r\n\r\n    /**\r\n     * \u521D\u59CB\u5316\u65B0\u7684 Curve \u5B9E\u4F8B\u3002\r\n     */\r\n    constructor();\r\n    constructor(...params: any) {\r\n        Curve[CONSTRUCTOR_SYMBOL].apply(this, params);\r\n    }\r\n\r\n    private static [CONSTRUCTOR_SYMBOL](...params: any): void {\r\n        Curve[CONSTRUCTOR_SYMBOL] = overload([], function (this: Curve) {\r\n            this.#postLoop = CurveLoopType.constant;\r\n            this.#preLoop = CurveLoopType.constant;\r\n            this.#keys = new CurveKeyCollection();\r\n        });\r\n\r\n        return Curve[CONSTRUCTOR_SYMBOL].apply(this, params);\r\n    }\r\n\r\n    public *[Symbol.iterator](): IterableIterator<CurveLoopType | CurveKeyCollection> {\r\n        yield this.#postLoop;\r\n        yield this.#preLoop;\r\n    }\r\n\r\n    /**\r\n     * \u8BA1\u7B97\u7ED9\u5B9A\u4F4D\u7F6E\u6240\u5C5E\u7684\u5FAA\u73AF\u6B21\u6570\u3002\r\n     * @param position \u8981\u8BA1\u7B97\u7684\u66F2\u7EBF\u4F4D\u7F6E\u3002\r\n     * @returns \u5FAA\u73AF\u6B21\u6570\u3002\r\n     */\r\n    #getNumberOfCycle(position: number): number {\r\n        const keys = this.#keys.toArray();\r\n        let cycle = (position - keys[0].position) / (keys[keys.length - 1].position - keys[0].position);\r\n        if (cycle < 0) cycle--;\r\n        return cycle | 0;\r\n    }\r\n\r\n    /**\r\n     * \u8BA1\u7B97\u66F2\u7EBF\u5728\u7ED9\u5B9A\u4F4D\u7F6E\u7684\u503C\u3002\r\n     * @param position \u8981\u8BA1\u7B97\u7684\u66F2\u7EBF\u4F4D\u7F6E\u3002\r\n     * @returns \u66F2\u7EBF\u5728\u7ED9\u5B9A\u4F4D\u7F6E\u7684\u503C\u3002\r\n     */\r\n    #getCurvePosition(position: number): number {\r\n        const keys = this.#keys.toArray();\r\n        let prev = keys[0];\r\n        let next;\r\n        for (let i = 1; i < keys.length; ++i) {\r\n            next = keys[i];\r\n            if (next.position >= position) {\r\n                if (prev.continuity == CurveContinuity.step) {\r\n                    if (position >= 1) return next.value;\r\n                    return prev.value;\r\n                }\r\n                let t = (position - prev.position) / (next.position - prev.position);\r\n                let ts = t * t;\r\n                let tss = ts * t;\r\n                return (2 * tss - 3 * ts + 1) * prev.value + (tss - 2 * ts + t) * prev.tangentOut + (3 * ts - 2 * tss) * next.value + (tss - ts) * next.tangentIn;\r\n            }\r\n            prev = next;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    /**\r\n     * \u786E\u5B9A\u6307\u5B9A\u7684 Curve \u662F\u5426\u7B49\u4E8E\u5F53\u524D Curve\u3002\r\n     * @param other \u7528\u4E8E\u4E0E\u5F53\u524D Curve \u6BD4\u8F83\u7684 Curve\u3002\r\n     * @returns \u662F\u5426\u76F8\u7B49\u3002\r\n     */\r\n    public [\"==\"](other: Curve): boolean;\r\n    public [\"==\"](...params: any): any {\r\n        return this.equals.apply(this, params);\r\n    }\r\n\r\n    /**\r\n     * \u786E\u5B9A\u6307\u5B9A\u7684 Curve \u662F\u5426\u4E0D\u7B49\u4E8E\u5F53\u524D Curve\u3002\r\n     * @param other \u7528\u4E8E\u4E0E\u5F53\u524D Curve \u6BD4\u8F83\u7684 Curve\u3002\r\n     * @returns \u662F\u5426\u4E0D\u76F8\u7B49\u3002\r\n     */\r\n    public [\"!=\"](other: Curve): boolean;\r\n    public [\"!=\"](...params: any): any {\r\n        return !this.equals.apply(this, params);\r\n    }\r\n\r\n    /**\r\n     * \u521B\u5EFA Curve \u7684\u526F\u672C\u3002\r\n     * @returns Curve \u7684\u526F\u672C\u3002\r\n     */\r\n    public clone(): Curve;\r\n    public clone(...params: any): any {\r\n        Curve.prototype.clone = overload([], function (this: Curve) {\r\n            const curve = new Curve();\r\n            curve.#keys = this.#keys.clone();\r\n            curve.#preLoop = this.#preLoop;\r\n            curve.#postLoop = this.#postLoop;\r\n            return curve;\r\n        });\r\n\r\n        return Curve.prototype.clone.apply(this, params);\r\n    }\r\n\r\n    /**\r\n     * \u4E3A\u901A\u8FC7\u7D22\u5F15\u6307\u5B9A\u7684 CurveKey \u8BA1\u7B97 tangentIn \u548C tangentOut\u3002\r\n     * @param keyIndex \u8981\u8BA1\u7B97\u5207\u7EBF\u7684 CurveKey \u7684\u7D22\u5F15\uFF08\u5728 Curve \u7684 keys \u96C6\u5408\u4E2D\uFF09\u3002\r\n     * @param tangentType \u8981\u8BA1\u7B97\u7684\u5207\u7EBF\u7684\u7C7B\u578B\uFF08CurveTangent \u679A\u4E3E\u4E2D\u6307\u5B9A\u7684\u4E00\u4E2A\u7C7B\u578B\uFF09\u3002\r\n     */\r\n    public computeTangent(keyIndex: number, tangentType: CurveTangent): void;\r\n    /**\r\n     * \u4E3A\u7ED9\u5B9A\u7684 CurveKey \u8BA1\u7B97\u6307\u5B9A\u7C7B\u578B\u7684 tangentIn \u548C\u6307\u5B9A\u7C7B\u578B\u7684 tangentOut\u3002\r\n     * @param keyIndex \u8981\u8BA1\u7B97\u5207\u7EBF\u7684 CurveKey \u7684\u7D22\u5F15\uFF08\u5728 Curve \u7684 keys \u96C6\u5408\u4E2D\uFF09\u3002\r\n     * @param tangentInType \u8981\u8BA1\u7B97\u7684 tangentIn \u7684\u7C7B\u578B\uFF08CurveTangent \u679A\u4E3E\u4E2D\u6307\u5B9A\u7684\u4E00\u4E2A\u7C7B\u578B\uFF09\u3002\r\n     * @param tangentOutType \u8981\u8BA1\u7B97\u7684 tangentOut \u7684\u7C7B\u578B\uFF08CurveTangent \u679A\u4E3E\u4E2D\u6307\u5B9A\u7684\u4E00\u4E2A\u7C7B\u578B\uFF09\u3002\r\n     */\r\n    public computeTangent(\r\n        keyIndex: number,\r\n        tangentInType: CurveTangent,\r\n        tangentOutType: CurveTangent\r\n    ): void;\r\n    public computeTangent(...params: any): any {\r\n        Curve.prototype.computeTangent = overload()\r\n            .add([Number, CurveTangent], function (this: Curve, keyIndex, tangentType) {\r\n                this.computeTangent(keyIndex, tangentType, tangentType);\r\n            })\r\n            .add([Number, CurveTangent, CurveTangent], function (this: Curve, keyIndex, tangentInType, tangentOutType) {\r\n                const keys = this.#keys.toArray();\r\n                const key = keys[keyIndex];\r\n\r\n                let p0, p, p1;\r\n                p0 = p = p1 = key.position;\r\n\r\n                let v0, v, v1;\r\n                v0 = v = v1 = key.value;\r\n\r\n                if (keyIndex > 0) {\r\n                    p0 = keys[keyIndex - 1].position;\r\n                    v0 = keys[keyIndex - 1].value;\r\n                }\r\n\r\n                const keyLength = keys.length;\r\n                if (keyIndex < keyLength - 1) {\r\n                    p1 = keys[keyIndex + 1].position;\r\n                    v1 = keys[keyIndex + 1].value;\r\n                }\r\n\r\n                switch (tangentInType) {\r\n                    case CurveTangent.flat:\r\n                        key.tangentIn = 0;\r\n                        break;\r\n                    case CurveTangent.linear:\r\n                        key.tangentIn = v - v0;\r\n                        break;\r\n                    case CurveTangent.smooth:\r\n                        const pn = p1 - p0;\r\n                        if (Math.abs(pn) < Number.EPSILON) {\r\n                            key.tangentIn = 0;\r\n                        } else {\r\n                            key.tangentIn = (v1 - v0) * ((p - p0) / pn);\r\n                        }\r\n                        break;\r\n                }\r\n\r\n                switch (tangentOutType) {\r\n                    case CurveTangent.flat:\r\n                        key.tangentOut = 0;\r\n                        break;\r\n                    case CurveTangent.linear:\r\n                        key.tangentOut = v1 - v;\r\n                        break;\r\n                    case CurveTangent.smooth:\r\n                        const pn = p1 - p0;\r\n                        if (Math.abs(pn) < Number.EPSILON) {\r\n                            key.tangentOut = 0;\r\n                        } else {\r\n                            key.tangentOut = (v1 - v0) * ((p1 - p) / pn);\r\n                        }\r\n                        break;\r\n                }\r\n            });\r\n\r\n        return Curve.prototype.computeTangent.apply(this, params);\r\n    }\r\n\r\n    /**\r\n     * \u4E3A tangentIn \u548C tangentOut \u4F7F\u7528\u6307\u5B9A\u7684\u5207\u7EBF\u7C7B\u578B\uFF0C\u8BA1\u7B97\u8BE5 Curve \u4E2D\u6240\u6709 CurveKey \u7684\u5207\u7EBF\u3002\r\n     * @param tangentType \u8981\u8BA1\u7B97\u7684 tangentOut \u548C tangentIn \u7684\u7C7B\u578B\uFF08CurveTangent \u679A\u4E3E\u4E2D\u6307\u5B9A\u7684\u4E00\u4E2A\u7C7B\u578B\uFF09\u3002\r\n     */\r\n    public computeTangents(tangentType: CurveTangent): void;\r\n    /**\r\n     * \u4E3A tangentOut \u548C tangentIn \u4F7F\u7528\u4E0D\u540C\u7684\u5207\u7EBF\u7C7B\u578B\uFF0C\u8BA1\u7B97\u8BE5 Curve \u4E2D\u6240\u6709 CurveKey \u7684\u5207\u7EBF\u3002\r\n     * @param tangentInType \u8981\u8BA1\u7B97\u7684 tangentIn \u7684\u7C7B\u578B\uFF08CurveTangent \u679A\u4E3E\u4E2D\u6307\u5B9A\u7684\u4E00\u4E2A\u7C7B\u578B\uFF09\u3002\r\n     * @param tangentOutType \u8981\u8BA1\u7B97\u7684 tangentOut \u7684\u7C7B\u578B\uFF08CurveTangent \u679A\u4E3E\u4E2D\u6307\u5B9A\u7684\u4E00\u4E2A\u7C7B\u578B\uFF09\u3002\r\n     */\r\n    public computeTangents(\r\n        tangentInType: CurveTangent,\r\n        tangentOutType: CurveTangent\r\n    ): void;\r\n    public computeTangents(...params: any): any {\r\n        Curve.prototype.computeTangents = overload()\r\n            .add([CurveTangent], function (this: Curve, tangentType) {\r\n                this.computeTangents(tangentType, tangentType);\r\n            })\r\n            .add([CurveTangent, CurveTangent], function (this: Curve, tangentInType, tangentOutType) {\r\n                for (let i = 0; i < this.#keys.length; ++i) {\r\n                    this.computeTangent(i, tangentInType, tangentOutType);\r\n                }\r\n            });\r\n\r\n        return Curve.prototype.computeTangents.apply(this, params);\r\n    }\r\n\r\n    /**\r\n     * \u67E5\u627E Curve \u4E0A\u67D0\u4E2A\u4F4D\u7F6E\u7684\u503C\u3002\r\n     * @param position Curve \u4E0A\u7684\u4F4D\u7F6E\u3002\r\n     * @returns \u67E5\u627E\u5230\u7684\u503C\u3002\r\n     */\r\n    public evaluate(position: number): number;\r\n    public evaluate(...params: any): any {\r\n        Curve.prototype.evaluate = overload([Number], function (this: Curve, position) {\r\n            if (this.#keys.length === 0) return 0;\r\n\r\n            const keys = this.#keys.toArray();\r\n            if (keys.length === 1) return keys[0].value;\r\n\r\n            const first = keys[0];\r\n            const last = keys[keys.length - 1];\r\n            let cycle, virtualPos;\r\n\r\n            if (position < first.position) {\r\n                switch (this.preLoop) {\r\n                    case CurveLoopType.constant:\r\n                        return first.value;\r\n\r\n                    case CurveLoopType.linear:\r\n                        return first.value - first.tangentIn * (first.position - position);\r\n\r\n                    case CurveLoopType.cycle:\r\n                        cycle = this.#getNumberOfCycle(position);\r\n                        virtualPos = position - (cycle * (last.position - first.position));\r\n                        return this.#getCurvePosition(virtualPos);\r\n\r\n                    case CurveLoopType.cycleOffset:\r\n                        cycle = this.#getNumberOfCycle(position);\r\n                        virtualPos = position - (cycle * (last.position - first.position));\r\n                        return (this.#getCurvePosition(virtualPos) + cycle * (last.value - first.value));\r\n\r\n                    case CurveLoopType.oscillate:\r\n                        cycle = this.#getNumberOfCycle(position);\r\n                        if (0 == cycle % 2) {\r\n                            virtualPos = position - (cycle * (last.position - first.position));\r\n                        } else {\r\n                            virtualPos = last.position - position + first.position + (cycle * (last.position - first.position));\r\n                        }\r\n                        return this.#getCurvePosition(virtualPos);\r\n                }\r\n            } else if (position > last.position) {\r\n                switch (this.postLoop) {\r\n                    case CurveLoopType.constant:\r\n                        return last.value;\r\n\r\n                    case CurveLoopType.linear:\r\n                        return last.value + first.tangentOut * (position - last.position);\r\n\r\n                    case CurveLoopType.cycle:\r\n                        cycle = this.#getNumberOfCycle(position);\r\n                        virtualPos = position - (cycle * (last.position - first.position));\r\n                        return this.#getCurvePosition(virtualPos);\r\n\r\n                    case CurveLoopType.cycleOffset:\r\n                        cycle = this.#getNumberOfCycle(position);\r\n                        virtualPos = position - (cycle * (last.position - first.position));\r\n                        return (this.#getCurvePosition(virtualPos) + cycle * (last.value - first.value));\r\n\r\n                    case CurveLoopType.oscillate:\r\n                        cycle = this.#getNumberOfCycle(position);\r\n                        virtualPos = position - (cycle * (last.position - first.position));\r\n                        if (0 == cycle % 2) {\r\n                            virtualPos = position - (cycle * (last.position - first.position));\r\n                        } else {\r\n                            virtualPos = last.position - position + first.position + (cycle * (last.position - first.position));\r\n                        }\r\n                        return this.#getCurvePosition(virtualPos);\r\n                }\r\n            }\r\n\r\n            return this.#getCurvePosition(position);\r\n        });\r\n\r\n        return Curve.prototype.evaluate.apply(this, params);\r\n    }\r\n\r\n    /**\r\n     * \u786E\u5B9A\u6307\u5B9A\u7684 Curve \u662F\u5426\u7B49\u4E8E\u5F53\u524D Curve\u3002\r\n     * @param value \u7528\u4E8E\u4E0E\u5F53\u524D Curve \u6BD4\u8F83\u7684 Curve\u3002\r\n     */\r\n    public equals(value: Curve): boolean;\r\n    public equals(...params: any): any {\r\n        Curve.prototype.equals = overload([Curve], function (this: Curve, other) {\r\n            return this.#postLoop === other.#postLoop && this.#preLoop === other.#preLoop && this.#keys.equals(other.#keys);\r\n        }).any(() => false);\r\n\r\n        return Curve.prototype.equals.apply(this, params);\r\n    }\r\n\r\n    /**\r\n     * \u68C0\u7D22\u5F53\u524D\u5BF9\u8C61\u7684\u5B57\u7B26\u4E32\u5448\u73B0\u3002\r\n     * @returns \u5F53\u524D\u5BF9\u8C61\u7684\u5B57\u7B26\u4E32\u5448\u73B0\u3002\r\n     */\r\n    public toString(): string;\r\n    public toString(...params: any): any {\r\n        Curve.prototype.toString = overload([], function (this: Curve) {\r\n            return JSON.stringify(this);\r\n        });\r\n\r\n        return Curve.prototype.toString.apply(this, params);\r\n    }\r\n\r\n    /**\r\n     * \u8FD4\u56DE\u5F53\u524D Curve \u7684 JSON \u8868\u793A\u5F62\u5F0F\u3002\r\n     * @returns \u5F53\u524D Curve \u7684 JSON \u8868\u793A\u5F62\u5F0F\u3002\r\n     */\r\n    public toJSON(): object {\r\n        return {\r\n            postLoop: this.#postLoop,\r\n            preLoop: this.#preLoop,\r\n            keys: this.#keys\r\n        };\r\n    }\r\n}\r\n"],
  "mappings": "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",
  "names": ["CONSTRUCTOR_SYMBOL", "_preLoop_dec", "_postLoop_dec", "_postLoop", "_init", "_preLoop", "_keys", "_Curve_instances", "getNumberOfCycle_fn", "getCurvePosition_fn", "_Curve", "params", "__runInitializers", "__privateAdd", "__privateGet", "value", "__privateSet", "H", "CurveLoopType", "src_default", "CurveKeyCollection", "curve", "CurveTangent", "keyIndex", "tangentType", "tangentInType", "tangentOutType", "keys", "key", "p0", "p", "p1", "v0", "v", "v1", "keyLength", "pn", "i", "position", "first", "last", "cycle", "virtualPos", "__privateMethod", "other", "__decoratorStart", "prev", "next", "CurveContinuity", "t", "ts", "tss", "__decorateElement", "__decoratorMetadata", "Curve"]
}
